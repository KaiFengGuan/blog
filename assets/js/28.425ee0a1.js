(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{585:function(_,v,t){"use strict";t.r(v);var a=t(10),e=Object(a.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("p",[_._v("前端性能优化手段从以下几个方面入手："),t("strong",[_._v("加载优化")]),_._v("、"),t("strong",[_._v("执行优化")]),_._v("、"),t("strong",[_._v("渲染优化")]),_._v("、"),t("strong",[_._v("样式优化")]),_._v("、"),t("strong",[_._v("脚本优化")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("加载优化")]),_._v("：减少HTTP请求、缓存资源、压缩代码、无阻塞、首屏加载、按需加载、预加载、压缩图像、减少Cookie、避免重定向、异步加载第三方资源")]),_._v(" "),t("li",[t("strong",[_._v("执行优化")]),_._v("：CSS写在头部，JS写在尾部并异步、避免img、iframe等的src为空、尽量避免重置图像大小、图像尽量避免使用DataURL")]),_._v(" "),t("li",[t("strong",[_._v("渲染优化")]),_._v("：设置viewport、减少DOM节点、优化动画、优化高频事件、GPU加速")]),_._v(" "),t("li",[t("strong",[_._v("样式优化")]),_._v("：避免在HTML中书写style、避免CSS表达式、移除CSS空规则、正确使用"),t("code",[_._v("display：display")]),_._v("、不滥用float等")]),_._v(" "),t("li",[t("strong",[_._v("脚本优化")]),_._v("：减少重绘和回流、缓存DOM选择与计算、缓存"),t("code",[_._v(".length")]),_._v("的值、尽量使用事件代理、尽量使用id选择器、touch事件优化")])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("2-5-8原则")]),_._v("：针对浏览器页面的性能优化的一种开发指导思路")]),_._v(" "),t("ul",[t("li",[_._v("用户在"),t("code",[_._v("2秒内")]),_._v("得到响应，会感觉页面的响应速度很快 Fast")]),_._v(" "),t("li",[_._v("用户在"),t("code",[_._v("2~5秒间")]),_._v("得到响应，会感觉页面的响应速度还行 Medium")]),_._v(" "),t("li",[_._v("用户在"),t("code",[_._v("5~8秒间")]),_._v("得到响应，会感觉页面的响应速度很慢，但还可以接受 Slow")]),_._v(" "),t("li",[_._v("用户在"),t("code",[_._v("8秒后")]),_._v("仍然无法得到响应，会感觉页面的响应速度垃圾死了")])])]),_._v(" "),t("h2",{attrs:{id:"_1-加载优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-加载优化"}},[_._v("#")]),_._v(" 1 加载优化")]),_._v(" "),t("h3",{attrs:{id:"_1-1-减少http请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-减少http请求"}},[_._v("#")]),_._v(" 1.1 减少HTTP请求")]),_._v(" "),t("p",[_._v("尽量减少页面的请求数（首次加载同时请求数不能超过4个），移动设备浏览器同时响应请求为4个请求（"),t("code",[_._v("Android")]),_._v("支持4个，"),t("code",[_._v("iOS5+")]),_._v("支持6个）")]),_._v(" "),t("ul",[t("li",[_._v("合并CSS和JS")]),_._v(" "),t("li",[_._v("使用CSS精灵图（sprite）：所谓精灵图就是把很多的小图片合并到一张较大的图片里，运用background-position来显示需要显示的部分。")])]),_._v(" "),t("h3",{attrs:{id:"_1-2-缓存资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-缓存资源"}},[_._v("#")]),_._v(" 1.2 缓存资源")]),_._v(" "),t("p",[_._v("使用缓存可减少向服务器的请求数，节省加载时间，所有静态资源都要在服务器端设置缓存，并且尽量使用长缓存（使用时间戳更新缓存）")]),_._v(" "),t("ul",[t("li",[_._v("缓存一切可缓存的资源")]),_._v(" "),t("li",[_._v("使用长缓存")]),_._v(" "),t("li",[_._v("使用外联的样式和脚本")])]),_._v(" "),t("h3",{attrs:{id:"_1-3-压缩代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-压缩代码"}},[_._v("#")]),_._v(" 1.3 压缩代码")]),_._v(" "),t("p",[_._v("减少资源大小可加快网页显示速度，对代码进行压缩，并在服务器端设置"),t("code",[_._v("GZip")])]),_._v(" "),t("ul",[t("li",[_._v("压缩代码（多余的缩进、空格和换行符）")]),_._v(" "),t("li",[_._v("启用Gzip：。客户端HTTP请求头通过Accept-Encoding标识对压缩的支持；服务端配置启用压缩，压缩的文件类型，压缩方式，在HTTP响应头，我们可以看到"),t("code",[_._v("content-encoding: gzip")]),_._v("，这是指服务端使用了gzip的压缩方式。")])]),_._v(" "),t("h3",{attrs:{id:"_1-4-无阻塞脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-无阻塞脚本"}},[_._v("#")]),_._v(" 1.4 无阻塞脚本")]),_._v(" "),t("p",[_._v("头部内联的样式和脚本会阻塞页面的渲染，样式放在头部并使用"),t("code",[_._v("link")]),_._v("方式引入，脚本放在尾部并使用异步方式（defer、async属性）加载")]),_._v(" "),t("ul",[t("li",[_._v("defer：立即下载该脚本，但是等整个页面解析完毕后再运行。")]),_._v(" "),t("li",[_._v("async：立即下载该脚本，加载完就立即执行，且不阻止页面其他动作，即，不必等到脚本下载和执行完再加载页面，也不必等该异步脚本下载和执行后再加载其他脚本。")])]),_._v(" "),t("h3",{attrs:{id:"_1-5-首屏加载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-首屏加载"}},[_._v("#")]),_._v(" 1.5 首屏加载")]),_._v(" "),t("p",[_._v("首屏快速显示可大大提升用户对页面速度的感知，应尽量针对首屏的快速显示做优化。")]),_._v(" "),t("h4",{attrs:{id:"三大核心指标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三大核心指标"}},[_._v("#")]),_._v(" 三大核心指标")]),_._v(" "),t("p",[_._v("Google 在20年五月提出了网站用户体验的三大核心指标，分别为：")]),_._v(" "),t("ul",[t("li",[_._v("LCP，最大内容绘制，LCP（Largest Contentful Paint），记录视窗内最大的元素绘制的时间")]),_._v(" "),t("li",[_._v("FID，首次输入延迟，FID（First Input Delay），记录在 FCP 和 TTI（首次可交互时间）之间用户首次与页面交互时响应的延迟")]),_._v(" "),t("li",[_._v("CLS，累计位移偏移，CLS（Cumulative Layout Shift），记录了页面上非预期的位移波动")])]),_._v(" "),t("p",[_._v("LCP 代表了页面的速度指标，虽然还存在其他的一些体现速度的指标，但是上文也说过 LCP 能体现的东西更多一些。一是指标实时更新，数据更精确，二是代表着页面最大元素的渲染时间，通常来说页面中最大元素的快速载入能让用户感觉性能还挺好。")]),_._v(" "),t("p",[_._v("FID 代表了页面的交互体验指标，毕竟没有一个用户希望触发交互以后页面的反馈很迟缓，交互响应的快会让用户觉得网页挺流畅。")]),_._v(" "),t("p",[_._v("CLS 代表了页面的稳定指标，尤其在手机上这个指标更为重要。因为手机屏幕挺小，CLS 值一大的话会让用户觉得页面体验做的很差。")]),_._v(" "),t("blockquote",[t("p",[_._v("推荐阅读《"),t("a",{attrs:{href:"https://juejin.cn/post/7063754993072865287",target:"_blank",rel:"noopener noreferrer"}},[_._v("我的前端性能优化知识体系"),t("OutboundLink")],1),_._v("》")])]),_._v(" "),t("h3",{attrs:{id:"_1-6-按需加载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-按需加载"}},[_._v("#")]),_._v(" 1.6 按需加载")]),_._v(" "),t("p",[_._v("将不影响首屏的资源和当前屏幕不用的资源放到用户需要时才加载，可大大提升显示速度和降低总体流量（按需加载会导致大量重绘，影响渲染性能）")]),_._v(" "),t("ul",[t("li",[_._v("懒加载：如页面中的图片资源src首先保存在data-src中，然后当页面可视区域到达图片的显示位置时再动态载入图片。")]),_._v(" "),t("li",[_._v("滚屏加载")]),_._v(" "),t("li",[_._v("Media Query加载：针对不同屏幕尺寸和分辨率，输出不同大小的图片或者背景图能保证用户体验不降低的前提下节省网络流量，加快部分机型图片载入速度（移动端）")])]),_._v(" "),t("h3",{attrs:{id:"_1-7-预加载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-预加载"}},[_._v("#")]),_._v(" 1.7 预加载")]),_._v(" "),t("p",[_._v("大型资源页面可使用"),t("code",[_._v("Loading")]),_._v("，资源加载完成后再显示页面，但加载时间过长，会造成用户流失")]),_._v(" "),t("ul",[t("li",[_._v("可感知Loading：进入页面时"),t("code",[_._v("Loading")])]),_._v(" "),t("li",[_._v("不可感知Loading：提前加载下一页")])]),_._v(" "),t("h3",{attrs:{id:"_1-8-压缩图像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-压缩图像"}},[_._v("#")]),_._v(" 1.8 压缩图像")]),_._v(" "),t("p",[_._v("使用图像时选择最合适的格式和大小，然后使用工具压缩，同时在代码中用"),t("code",[_._v("srcset")]),_._v("来按需显示（过度压缩图像大小影响图像显示效果）")]),_._v(" "),t("ul",[t("li",[_._v("使用"),t("a",{attrs:{href:"https://tinyjpg.com/",target:"_blank",rel:"noopener noreferrer"}},[_._v("TinyJpg"),t("OutboundLink")],1),_._v("和"),t("a",{attrs:{href:"https://tinypng.com/",target:"_blank",rel:"noopener noreferrer"}},[_._v("TinyPng"),t("OutboundLink")],1),_._v("压缩图像")]),_._v(" "),t("li",[_._v("使用CSS3、SVG、IconFont代替图像")]),_._v(" "),t("li",[_._v("使用img的srcset按需加载图像，以最合适的src去匹配不同屏幕")]),_._v(" "),t("li",[_._v("选择合适的图像："),t("code",[_._v("webp")]),_._v("优于"),t("code",[_._v("jpg")]),_._v("，"),t("code",[_._v("png8")]),_._v("优于"),t("code",[_._v("gif")])]),_._v(" "),t("li",[_._v("选择合适的大小：首次加载不大于"),t("code",[_._v("1014kb")]),_._v("、不宽于"),t("code",[_._v("640px")])]),_._v(" "),t("li",[_._v("PS切图时D端图像保存质量为80，M端图像保存质量为60")])]),_._v(" "),t("h3",{attrs:{id:"_1-9-减少cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-减少cookie"}},[_._v("#")]),_._v(" 1.9 减少Cookie")]),_._v(" "),t("p",[t("code",[_._v("Cookie")]),_._v("会影响加载速度，静态资源域名不使用"),t("code",[_._v("Cookie")])]),_._v(" "),t("h3",{attrs:{id:"_1-10-避免重定向"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-10-避免重定向"}},[_._v("#")]),_._v(" 1.10 避免重定向")]),_._v(" "),t("p",[_._v("重定向会影响加载速度，在服务器正确设置避免重定向")]),_._v(" "),t("h3",{attrs:{id:"_1-11-异步加载第三方资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-11-异步加载第三方资源"}},[_._v("#")]),_._v(" 1.11 异步加载第三方资源")]),_._v(" "),t("p",[_._v("第三方资源不可控会影响页面的加载和显示，要异步加载第三方资源")]),_._v(" "),t("h2",{attrs:{id:"_2-执行优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-执行优化"}},[_._v("#")]),_._v(" 2 执行优化")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("CSS写在头部，JS写在尾部并异步")])]),_._v(" "),t("li",[t("strong",[_._v("避免img、iframe等的src为空")]),_._v("：空"),t("code",[_._v("src")]),_._v("会重新加载当前页面，影响速度和效率")]),_._v(" "),t("li",[t("strong",[_._v("尽量避免重置图像大小")]),_._v("：多次重置图像大小会引发图像的多次重绘，影响性能")]),_._v(" "),t("li",[t("strong",[_._v("图像尽量避免使用DataURL")]),_._v("："),t("code",[_._v("DataURL")]),_._v("图像没有使用图像的压缩算法，文件会变大，并且要解码后再渲染，加载慢耗时长")])]),_._v(" "),t("h2",{attrs:{id:"_3-渲染优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-渲染优化"}},[_._v("#")]),_._v(" 3 "),t("strong",[_._v("渲染优化")])]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("设置viewport")]),_._v("：HTML的"),t("code",[_._v("viewport")]),_._v("可加速页面的渲染")]),_._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("<")]),_._v("meta")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[_._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[_._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v('"')]),_._v("viewport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v('"')])]),_._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[_._v("content")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[_._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v('"')]),_._v("width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(">")])]),_._v("\n")])]),_._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[_._v("1")]),t("br")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("减少DOM节点")]),_._v("：DOM节点太多影响页面的渲染，尽量减少DOM节点")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("优化动画")])]),_._v(" "),t("ul",[t("li",[_._v("尽量使用CSS3动画")]),_._v(" "),t("li",[_._v("合理使用requestAnimationFrame动画代替setTimeout")]),_._v(" "),t("li",[_._v("适当使用Canvas动画：5个元素以内使用"),t("code",[_._v("CSS动画")]),_._v("，5个元素以上使用"),t("code",[_._v("Canvas动画")]),_._v("，"),t("code",[_._v("iOS8+")]),_._v("可使用"),t("code",[_._v("WebGL动画")])])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("优化高频事件")]),_._v("："),t("code",[_._v("scroll")]),_._v("、"),t("code",[_._v("touchmove")]),_._v("等事件可导致多次渲染")]),_._v(" "),t("ul",[t("li",[_._v("函数节流")]),_._v(" "),t("li",[_._v("函数防抖")]),_._v(" "),t("li",[_._v("使用requestAnimationFrame监听帧变化：使得在正确的时间进行渲染")]),_._v(" "),t("li",[_._v("增加响应变化的时间间隔：减少重绘次数")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("GPU加速")]),_._v("：使用某些HTML5标签和CSS3属性会触发"),t("code",[_._v("GPU渲染")]),_._v("，请合理使用（"),t("strong",[_._v("过渡使用会引发手机耗电量增加")]),_._v("）")]),_._v(" "),t("ul",[t("li",[_._v("HTML标签："),t("code",[_._v("video")]),_._v("、"),t("code",[_._v("canvas")]),_._v("、"),t("code",[_._v("webgl")])]),_._v(" "),t("li",[_._v("CSS属性："),t("code",[_._v("opacity")]),_._v("、"),t("code",[_._v("transform")]),_._v("、"),t("code",[_._v("transition")])])])])]),_._v(" "),t("h2",{attrs:{id:"_4-样式优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-样式优化"}},[_._v("#")]),_._v(" 4 样式优化")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("避免在HTML中书写style")])]),_._v(" "),t("li",[t("strong",[_._v("避免CSS表达式")]),_._v("：CSS表达式的执行需跳出CSS树的渲染")]),_._v(" "),t("li",[t("strong",[_._v("移除CSS空规则")]),_._v("：CSS空规则增加了css文件的大小，影响CSS树的执行")]),_._v(" "),t("li",[_._v("正确使用"),t("code",[_._v("display：display")]),_._v("会影响页面的渲染\n"),t("ul",[t("li",[t("code",[_._v("display:inline")]),_._v("后不应该再使用"),t("code",[_._v("float")]),_._v("、"),t("code",[_._v("margin")]),_._v("、"),t("code",[_._v("padding")]),_._v("、"),t("code",[_._v("width")]),_._v("和"),t("code",[_._v("height")])]),_._v(" "),t("li",[t("code",[_._v("display:inline-block")]),_._v("后不应该再使用"),t("code",[_._v("float")])]),_._v(" "),t("li",[t("code",[_._v("display:block")]),_._v("后不应该再使用"),t("code",[_._v("vertical-align")])]),_._v(" "),t("li",[t("code",[_._v("display:table-*")]),_._v("后不应该再使用"),t("code",[_._v("float")]),_._v("和"),t("code",[_._v("margin")])])])]),_._v(" "),t("li",[t("strong",[_._v("不滥用float")]),_._v("："),t("code",[_._v("float")]),_._v("在渲染时计算量比较大，尽量减少使用")]),_._v(" "),t("li",[t("strong",[_._v("不滥用Web字体")]),_._v("：Web字体需要下载、解析、重绘当前页面，尽量减少使用")]),_._v(" "),t("li",[t("strong",[_._v("不声明过多的font-size")]),_._v("：过多的"),t("code",[_._v("font-size")]),_._v("影响CSS树的效率")]),_._v(" "),t("li",[t("strong",[_._v("值为0时不需要任何单位")]),_._v("：为了浏览器的兼容性和性能，值为"),t("code",[_._v("0")]),_._v("时不要带单位")]),_._v(" "),t("li",[_._v("标准化各种浏览器前缀\n"),t("ul",[t("li",[_._v("无前缀属性应放在最后")]),_._v(" "),t("li",[_._v("CSS动画属性只用-webkit-、无前缀两种")]),_._v(" "),t("li",[_._v("其它前缀为-webkit-、-moz-、-ms-、无前缀四种："),t("code",[_._v("Opera")]),_._v("改用"),t("code",[_._v("blink")]),_._v("内核，"),t("code",[_._v("-o-")]),_._v("已淘汰")])])]),_._v(" "),t("li",[t("strong",[_._v("避免让选择符看起来像正则表达式")]),_._v("：高级选择符执行耗时长且不易读懂，避免使用")])]),_._v(" "),t("h2",{attrs:{id:"_5-脚本优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-脚本优化"}},[_._v("#")]),_._v(" 5 脚本优化")]),_._v(" "),t("ul",[t("li",[_._v("减少重绘和回流\n"),t("ul",[t("li",[_._v("避免不必要的DOM操作")]),_._v(" "),t("li",[_._v("避免使用document.write")]),_._v(" "),t("li",[_._v("减少drawImage")]),_._v(" "),t("li",[_._v("尽量改变class而不是style，使用classList代替className")])])]),_._v(" "),t("li",[t("strong",[_._v("缓存DOM选择与计算")]),_._v("：每次DOM选择都要计算和缓存")]),_._v(" "),t("li",[t("strong",[_._v("缓存.length的值")]),_._v("：每次"),t("code",[_._v(".length")]),_._v("计算用一个变量保存值")]),_._v(" "),t("li",[t("strong",[_._v("尽量使用事件代理")]),_._v("：避免批量绑定事件")]),_._v(" "),t("li",[t("strong",[_._v("尽量使用id选择器")]),_._v("："),t("code",[_._v("id")]),_._v("选择器选择元素是最快的")]),_._v(" "),t("li",[t("strong",[_._v("touch事件优化")]),_._v("：使用"),t("code",[_._v("tap")]),_._v("（"),t("code",[_._v("touchstart")]),_._v("和"),t("code",[_._v("touchend")]),_._v("）代替"),t("code",[_._v("click")]),_._v("（"),t("strong",[_._v("注意"),t("code",[_._v("touch")]),_._v("响应过快，易引发误操作")]),_._v("）")])])])}),[],!1,null,null,null);v.default=e.exports}}]);