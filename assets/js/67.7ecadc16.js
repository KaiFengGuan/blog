(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{627:function(e,v,_){"use strict";_.r(v);var t=_(10),r=Object(t.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("p",[e._v("导航守卫主要用来通过跳转或取消的方式守卫导航。通俗点讲就是一个拦截器。")]),e._v(" "),_("h2",{attrs:{id:"_1-导航守卫分类"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-导航守卫分类"}},[e._v("#")]),e._v(" 1 导航守卫分类")]),e._v(" "),_("ul",[_("li",[_("p",[_("strong",[e._v("全局守卫")])]),e._v(" "),_("ul",[_("li",[e._v("beforeEach")]),e._v(" "),_("li",[e._v("beforeResolve")]),e._v(" "),_("li",[e._v("afterEach（在路由实例对象注册使用）")])])]),e._v(" "),_("li",[_("p",[_("strong",[e._v("路由守卫")])]),e._v(" "),_("ul",[_("li",[e._v("beforeEnter（在路由配置项中项定义）")])])]),e._v(" "),_("li",[_("p",[_("strong",[e._v("组件守卫")])]),e._v(" "),_("ul",[_("li",[e._v("beforeRouteEnter")]),e._v(" "),_("li",[e._v("beforeRouteUpdate")]),e._v(" "),_("li",[e._v("beforeRouteLeave（在组件属性中定义）")])])])]),e._v(" "),_("blockquote",[_("p",[_("a",{attrs:{href:"https://router.vuejs.org/zh/guide/advanced/navigation-guards.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("各守卫的详细用法去官网查看文档。"),_("OutboundLink")],1)])]),e._v(" "),_("h2",{attrs:{id:"_2-守卫详解"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-守卫详解"}},[e._v("#")]),e._v(" 2 守卫详解")]),e._v(" "),_("p",[e._v("每个守卫方法接收三个参数：")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("to")]),e._v("：(Route)：即将要进入的目标 路由对象")]),e._v(" "),_("li",[_("code",[e._v("from")]),e._v("：(Route)：当前导航正要离开的路由")]),e._v(" "),_("li",[_("code",[e._v("next")]),e._v("：(Function)：一定要调用该方法来 resolve 这个钩子。执行效果依赖 next 方法的调用参数。\n"),_("ul",[_("li",[_("code",[e._v("next()")]),e._v("：进行管道中的下一个钩子。如果全部钩子执行完了，则导航的状态就是 confirmed (确认的)。")]),e._v(" "),_("li",[_("code",[e._v("next(false)")]),e._v("：中断当前的导航。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到 from 路由对应的地址。")]),e._v(" "),_("li",[_("code",[e._v("next('/')")]),e._v(" 或者 "),_("code",[e._v("next({ path: '/' })")]),e._v("：跳转到一个不同的地址。当前的导航被中断，然后进行一个新的导航。你可以向 next 传递任意位置对象，且允许设置诸如 "),_("code",[e._v("replace: true")]),e._v("、"),_("code",[e._v("name: 'home'")]),e._v(" 之类的选项以及任何用在 router-link 的 to prop 或 "),_("code",[e._v("router.push")]),e._v(" 中的选项。")]),e._v(" "),_("li",[_("code",[e._v("next(error)")]),e._v("：(2.4.0+) 如果传入 next 的参数是一个 Error 实例，则导航会被终止且该错误会被传递给 "),_("code",[e._v("router.onError()")]),e._v(" 注册过的回调。")])])])]),e._v(" "),_("h2",{attrs:{id:"_3-导航守卫执行顺序"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-导航守卫执行顺序"}},[e._v("#")]),e._v(" 3 导航守卫执行顺序")]),e._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/KaiFengGuan/imgs/main/202203300928003.png",alt:""}})]),e._v(" "),_("h3",{attrs:{id:"完整的导航解析流程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#完整的导航解析流程"}},[e._v("#")]),e._v(" 完整的导航解析流程")]),e._v(" "),_("ol",[_("li",[e._v("导航被触发。")]),e._v(" "),_("li",[e._v("在失活的组件里调用 "),_("code",[e._v("beforeRouteLeave")]),e._v(" 守卫。")]),e._v(" "),_("li",[e._v("调用全局的 "),_("code",[e._v("beforeEach")]),e._v(" 守卫。")]),e._v(" "),_("li",[e._v("在重用的组件里调用 "),_("code",[e._v("beforeRouteUpdate")]),e._v(" 守卫(2.2+)。")]),e._v(" "),_("li",[e._v("在路由配置里调用 "),_("code",[e._v("beforeEnter")]),e._v("。")]),e._v(" "),_("li",[e._v("解析异步路由组件。")]),e._v(" "),_("li",[e._v("在被激活的组件里调用 "),_("code",[e._v("beforeRouteEnter")]),e._v("。")]),e._v(" "),_("li",[e._v("调用全局的 "),_("code",[e._v("beforeResolve")]),e._v(" 守卫(2.5+)。")]),e._v(" "),_("li",[e._v("导航被确认。")]),e._v(" "),_("li",[e._v("调用全局的 "),_("code",[e._v("afterEach")]),e._v(" 钩子。")]),e._v(" "),_("li",[e._v("触发 DOM 更新。")]),e._v(" "),_("li",[e._v("调用 "),_("code",[e._v("beforeRouteEnter")]),e._v(" 守卫中传给 "),_("code",[e._v("next")]),e._v(" 的回调函数，创建好的组件实例会作为回调函数的参数传入。")])]),e._v(" "),_("br"),e._v(" "),_("br"),e._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[e._v("参考链接")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://blog.csdn.net/weixin_40013817/article/details/102799434",target:"_blank",rel:"noopener noreferrer"}},[e._v("vue-router完整的导航解析流程以及导航守卫详解"),_("OutboundLink")],1)])])])])}),[],!1,null,null,null);v.default=r.exports}}]);